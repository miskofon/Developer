<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - geometry - cube</title>
		<meta charset="utf-8">
		<style>
			body {
				margin: 0px;
				background-color: #000000;
				overflow: hidden;
			}
		</style>
		<script src="js/three.js"></script>
		<script src="js/Detector.js"></script>
	</head>
	<body>
		<script>
		
			var camera, scene, renderer;
			var mesh;

			window.DevEngine = window.DevEngine || {};
			DevEngine.walls = {};
			DevEngine.interactions = {};
			DevEngine.meshes = {};
			DevEngine.floors = [];
			//animate();

			function SimpleFloor(position, depth, width, color) {
				this.pos = position;
				this.width = width;
				this.depth = depth;
				this.color = color;
				
				this.getMesh = function() {
					var material = new THREE.MeshBasicMaterial({color: this.color});
					var planeMesh = new THREE.Mesh(new THREE.PlaneGeometry(this.width, this.depth), material);
					planeMesh.position.x = this.pos.x;
					planeMesh.position.y = this.pos.y;
					planeMesh.position.z = this.pos.z;
					return planeMesh;
				};
				
			};
			
			
					
			DevEngine.init = function() {
			var WIDTH = window.innerWidth,
				HEIGHT = window.innerHeight;
				
				container = document.createElement( 'div' );
				document.body.appendChild( container );
				
				DevEngine.scene = new THREE.Scene();
				DevEngine.renderer = new THREE.WebGLRenderer({antialias:true}); 
				
				DevEngine.renderer.setSize( WIDTH, HEIGHT );
				DevEngine.renderer.setClearColor(0xf0f0f0);
				
				DevEngine.scene.add( new THREE.AmbientLight( 0x505050 ) );
				
				DevEngine.addLight();
				
				DevEngine.camera = new THREE.PerspectiveCamera( 50, WIDTH / HEIGHT, 1, 1000 );
				DevEngine.camera.position.x = 0;
				DevEngine.camera.position.y = -300;
				DevEngine.camera.position.z = 50;
				DevEngine.camera.lookAt(DevEngine.scene.position);
			
				container.appendChild( DevEngine.renderer.domElement );
				
				window.addEventListener( 'resize', DevEngine.onWindowResize, false );
			};
			
			DevEngine.addFloor = function (floor) {
				DevEngine.floors.push(floor);
				DevEngine.scene.add(floor.getMesh());
			};
			
			DevEngine.addLight = function() {
				var light = new THREE.SpotLight( 0xffffff, 1.5 );
				light.position.set( 0, 500, 2000 );
				light.castShadow = true;
				
				DevEngine.scene.add(light);
			};
			
			DevEngine.start = function() {
				requestAnimationFrame( DevEngine.animate );
				
				var floor = new SimpleFloor(new THREE.Vector3( 0, 0, 0 ), 400, 400, 0x5050FF);
				DevEngine.addFloor(floor);
			};
			
			DevEngine.animate = function() {
				//do staff

				DevEngine.renderer.render( DevEngine.scene, DevEngine.camera );
				requestAnimationFrame( DevEngine.animate );
			};
			
			DevEngine.onWindowResize = function () {
				
				DevEngine.camera.aspect = window.innerWidth / window.innerHeight;
				DevEngine.camera.updateProjectionMatrix();

				DevEngine.renderer.setSize( window.innerWidth, window.innerHeight );
			}
			
			window.DevEngine.init();
			window.DevEngine.start();

			

		</script>

	</body>
</html>
